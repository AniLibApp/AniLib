query SeasonListQuery($page: Int!
    , $perPage: Int!
    , $seasonYear: Int
    , $season: MediaSeason
    , $status: MediaStatus
    , $genre:String
    , $format: MediaFormat
    , $genre_in:[String]
    , $sort: [MediaSort]) {
    Page(page: $page, perPage: $perPage) {
        media(seasonYear: $seasonYear, season: $season,genre: $genre, format: $format,status: $status,genre_in: $genre_in, sort: $sort,isAdult:false) {
            ... on Media{
                ... narrowMediaContent
            }
        }
    }
}

query MediaListEditorQuery($mediaId:Int,$userId:Int, $format:ScoreFormat){
    MediaList(mediaId:$mediaId, userId:$userId){
        ... mediaListContent
        score(format:$format)
    }
}

query MediaRecommendationQuery($mediaId:Int, $page:Int, $perPage:Int
    , $sort:[RecommendationSort] ){
    Media(id:$mediaId, isAdult:false){
        recommendations(page:$page, perPage:$perPage,sort:$sort){
            nodes{
                id
                rating
                userRating
                media{
                    id
                }
                mediaRecommendation{
                    id
                    format
                    type
                    episodes
                    chapters
                    status
                    seasonYear
                    title{
                        ... mediaTitle
                    }
                    coverImage{
                        ... mediaCoverImage
                    }
                    bannerImage
                    averageScore
                    isAdult
                }
            }
        }
    }
}

query MediaWatchQuery($mediaId:Int){
    Media(id:$mediaId){
        streamingEpisodes{
            title
            thumbnail
            url
            site
        }
    }
}

query MediaCharacterQuery(
    $page:Int,
    $perPage:Int,
    $mediaId:Int
    , $language:StaffLanguage){
    Media(id:$mediaId){
        characters(page:$page, perPage:$perPage, sort:[ROLE,ID]){
            edges{
                id
                role
                node{
                    id
                    name{
                        full
                    }
                    image{
                        large
                        medium
                    }
                    siteUrl
                }
                voiceActors(language:$language){
                    id
                    name{
                        full
                    }
                    image{
                        large
                        medium
                    }
                    language
                }

            }

        }
    }
}

query MediaStaffQuery($page:Int, $perPage:Int, $mediaId:Int){
    Media(id:$mediaId){
        staff(page:$page,perPage:$perPage){
            edges{
                role
                node{
                    id
                    name{
                        full
                    }
                    image{
                        large
                        medium
                    }
                }
            }
        }
    }
}

query MediaReviewQuery($mediaId:Int, $page:Int, $perPage:Int){
    Media(id:$mediaId){
        reviews(page:$page,perPage:$perPage,sort:[RATING_DESC]){
            edges{
                node{
                    id
                    summary
                    userRating
                    rating
                    ratingAmount
                    user{
                        id
                        avatar{
                            large
                            medium
                        }
                    }
                }
            }
        }
    }
}

query MediaStatsQuery($mediaId:Int){
    Media(id:$mediaId){
        rankings{
            id
            rank
            type
            year
            allTime
            context
            season
        }

        trends(page:1, perPage:7,sort:[DATE_DESC]){
            nodes{
                date
                trending
            }
        }

        stats{
            statusDistribution{
                amount
                status
            }
        }
        stats{
            scoreDistribution{
                score
                amount
            }
        }
    }
}


query BrowseSimpleMediaQuery($mediaId:Int){
    Media(id:$mediaId){
        id
        title {
            ... mediaTitle
        }
        coverImage {
            ... on MediaCoverImage{
                medium
                large
                extraLarge
            }
        }
        bannerImage
    }
}

query MediaOverViewQuery($mediaId:Int){
    Media(id:$mediaId){
        id
        title {
            ... mediaTitle
        }

        nextAiringEpisode{
            id
            timeUntilAiring
            episode
        }

        isAdult
        format
        type
        genres
        status
        averageScore
        meanScore
        chapters
        volumes
        popularity
        favourites
        episodes
        duration
        season
        seasonYear
        description(asHtml:true)
        chapters
        volumes
        source
        hashtag
        relations{
            edges{
                relationType(version:2)
                node{
                    id
                    title{
                        ... mediaTitle
                    }
                    coverImage{
                        ... mediaCoverImage
                    }
                    bannerImage
                    type
                    seasonYear
                    format
                    status
                    averageScore
                }
            }
        }
        externalLinks{
            id
            url
            site
        }
        tags{
            name
            isMediaSpoiler
        }
        startDate {
            ... fuzzyDate
        }
        endDate{
            ... fuzzyDate
        }
        trailer{
            id
            site
            thumbnail
        }
        studios{
            edges{
                node{
                    id
                    name
                    isAnimationStudio
                }
            }
        }
    }
}

query CharacterQuery($characterId:Int){
    Character(id:$characterId){
        id
        name{
            full
            native
            alternative
        }
        image{
            large
            medium
        }
        isFavourite
        siteUrl
        favourites
        description(asHtml:true)
    }
}

query CharacterMediaQuery($characterId:Int, $page:Int, $perPage:Int){
    Character(id:$characterId){
        media(page:$page, perPage:$perPage){
            nodes{
                id
                averageScore
                coverImage{
                    large
                    extraLarge
                }
                title{
                    romaji
                    english
                    native
                    userPreferred
                }
                bannerImage
                format
                type
                season
                status
                seasonYear
            }
        }
    }
}

query CharacterActorQuery($characterId:Int ){
    Character(id:$characterId){
        media(sort:[ID_DESC]){
            edges{
                id
                node{
                    id
                }
                voiceActors(sort:[LANGUAGE]){
                    id
                    name{
                        full
                    }
                    image{
                        large
                        medium
                    }
                    language
                }
            }
        }
    }
}


query StaffQuery($id:Int){
    Staff(id:$id){
        id
        name{
            full
            native
            alternative
        }
        image{
            large
            medium
        }
        description(asHtml:true)
        favourites
        language
        isFavourite
        siteUrl
    }
}

query StaffCharacterMediaQuery($staffId:Int, $page:Int, $perPage:Int){
    Staff(id:$staffId){
        characters(page:$page,perPage:$perPage){
            nodes{
                id
                name{
                    full
                }
                image{
                    large
                    medium
                }


                media{
                    edges{
                        characterRole
                        node{
                            id
                            title{
                                romaji
                                english
                                native
                                userPreferred
                            }
                            averageScore
                            coverImage{
                                medium
                                large
                                extraLarge
                            }
                            bannerImage
                            isAdult
                            status
                            format
                            type
                            seasonYear
                        }
                    }
                }
            }
        }
    }
}

query StaffMediaRoleQuery($staffId:Int,$page:Int,$perPage:Int){
    Staff(id:$staffId){
        staffMedia(page:$page,perPage:$perPage){
            edges{
                node{
                    id
                    title{
                        romaji
                        english
                        native
                        userPreferred
                    }
                    coverImage{
                        extraLarge
                        large
                        medium
                    }
                    bannerImage
                    status
                    type
                    format
                    averageScore
                    seasonYear
                    isAdult
                }
                staffRole
            }
        }
    }
}

query StudioQuery($studioId:Int){
    Studio(id:$studioId){
        id
        name
        isFavourite
        favourites
        siteUrl
    }
}

query StudioMediaQuery($studioId:Int,$page:Int, $perPage:Int){
    Studio(id:$studioId){
        media(page:$page,perPage:$perPage){
            nodes{
                id
                title{
                    romaji
                    english
                    native
                    userPreferred
                }
                coverImage{
                    extraLarge
                    large
                    medium
                }
                isAdult
                averageScore
                bannerImage
                format
                seasonYear
                type
                status
            }
        }
    }
}


query MediaSearchQuery($search:String, $page:Int, $perPage:Int
    ,$type:MediaType,
    ,$format:MediaFormat
    ,$season:MediaSeason
    ,$seasonYear:Int
    ,$yearGreater:FuzzyDateInt
    ,$yearLesser:FuzzyDateInt
    ,$status:MediaStatus
    ,$source:MediaSource
    ,$streamingOn:[String]
    ,$genre:[String]
    ,$tag:[String]
    ,$sort:[MediaSort]
    ,$country:CountryCode){
    Page(page:$page,perPage:$perPage){
        media(search:$search
            , type:$type
            , format:$format
            , season:$season
            , seasonYear:$seasonYear
            , startDate_greater:$yearGreater
            , startDate_lesser:$yearLesser
            , status:$status
            , source:$source
            , licensedBy_in:$streamingOn
            , genre_in:$genre
            , tag_in:$tag
            , sort:$sort
            , countryOfOrigin:$country
            , isAdult:false){
            id
            title{
                romaji
                english
                native
                userPreferred
            }
            coverImage{
                extraLarge
                large
                medium
            }
            bannerImage
            averageScore
            type
            format
            status
            season
            seasonYear
        }
    }
}

query CharacterSearchQuery($search:String, $page:Int, $perPage:Int){
    Page(page:$page,perPage:$perPage){
        characters(search:$search, sort:[FAVOURITES_DESC]){
            id
            name{
                full
            }
            image{
                large
                medium
            }
        }
    }
}

query StaffSearchQuery($search:String, $page:Int, $perPage:Int){
    Page(page:$page, perPage:$perPage){
        staff(search:$search, sort:[FAVOURITES_DESC]){
            id
            name{
                full
            }
            image{
                large
                medium
            }
        }
    }
}

query StudioSearchQuery($search:String, $page:Int, $perPage:Int){
    Page(page:$page, perPage:$perPage){

        studios(search:$search, sort:[FAVOURITES_DESC]){
            id
            name
            media(page:1, perPage:8, sort:[POPULARITY_DESC]){
                nodes{
                    id
                    title{
                        romaji
                        english
                        native
                        userPreferred
                    }
                    coverImage{
                        extraLarge
                        large
                        medium
                    }
                    bannerImage
                    averageScore
                    type
                    format
                    status
                    season
                    isAdult
                    seasonYear
                }
            }
        }

    }
}

query RecommendationQuery($page:Int, $perPage:Int, $onList:Boolean, $sort:[RecommendationSort]){
    Page(page:$page, perPage:$perPage){
        recommendations(onList:$onList, sort:$sort){
            id
            rating
            userRating
            media{
                ... recommendationMedia
            }
            mediaRecommendation{
                ... recommendationMedia
            }
        }
    }
}


query MediaListCollectinoQuery(
    $userId:Int,
    $userName:String,
    $type:MediaType,
    $status:MediaListStatus,
    $includeEpisode:Boolean!,
    $includeChapter:Boolean!
){
    #Laevatein
    MediaListCollection(
        userId:$userId
        , userName:$userName
        , type:$type
        , status:$status
    ){
        lists{
            entries{
                id
                score
                progress
                user{
                    mediaListOptions{
                        scoreFormat
                    }
                }
                media{
                    id
                    title{
                        userPreferred
                    }
                    coverImage{
                        large
                    }
                    format
                    status
                    genres
                    episodes @include(if:$includeEpisode)
                    chapters @include(if:$includeChapter)
                }
            }
        }
    }
}


query BasicUserQuery($id:Int){
    User(id:$id){
        id
        name
        avatar{
            medium
            large
        }
        bannerImage
        mediaListOptions{
            scoreFormat
        }
    }
}

query UserProfileQuery($name:String, $id:Int){
    User(name:$name, id:$id){
        id
        name
        about(asHtml:true)
        avatar{
            medium
            large
        }
        bannerImage
        isFollowing
        isFollower
        isBlocked
        siteUrl
        statistics{
            anime{
                count
                minutesWatched
                meanScore
                genres{
                    count
                    genre
                }

            }
            manga{
                count
                chaptersRead
                meanScore

                genres{
                    count
                    genre
                }
            }
        }
    }
}

query UserTotalFollowersQuery($id:Int!){
    Page{
        pageInfo{
            total
        }
        followers(userId:$id){
            __typename
        }
    }
}

query UserTotalFollowingQuery($id:Int!){
    Page{
        pageInfo{
            total
        }
        following(userId:$id){
            __typename
        }
    }
}

query UserFollowersQuery($id:Int!, $page:Int, $perPage:Int){
    Page(page:$page, perPage:$perPage){
        followers(userId:$id){
            id
            name
            avatar{
                medium
            }
        }
    }
}

query UserFollowingQuery($id:Int!, $page:Int, $perPage:Int){
    Page(page:$page, perPage:$perPage){
        following(userId:$id){
            id
            name
            avatar{
                medium
            }
        }
    }
}

query IsFavouriteQuery($mediaId:Int){
    Media(id:$mediaId){
        isFavourite
    }
}


#mutation
mutation SaveMediaListEntryMutation(
    $listId:Int, $mediaId:Int,
    $status:MediaListStatus,
    $score:Float,
    $progress:Int,
    $progressVolumes:Int,
    $private_:Boolean,
    $repeat:Int,
    $notes:String,
    $startedAt:FuzzyDateInput,
    $completedAt:FuzzyDateInput
){
    SaveMediaListEntry(id:$listId, mediaId:$mediaId
        , status:$status
        , score:$score
        , progress:$progress
        , progressVolumes:$progressVolumes
        ,repeat:$repeat
        ,private:$private_
        ,startedAt:$startedAt,completedAt:$completedAt, notes:$notes){
        id
    }
}


mutation UpdateRecommendationMutation($mediaId:Int, $mediaRecommendationId:Int, $rating:RecommendationRating){
    SaveRecommendation(mediaId:$mediaId, mediaRecommendationId:$mediaRecommendationId, rating:$rating){
        id
        userRating
        rating
    }
}

mutation SaveRecommendationMutation($mediaId:Int, $mediaRecommendationId:Int, $rating:RecommendationRating){
    SaveRecommendation(mediaId:$mediaId, mediaRecommendationId:$mediaRecommendationId, rating:$rating){
        id
        rating
        userRating
        media{
            id
        }
        mediaRecommendation{
            title{
                english
                romaji
                english
            }
            averageScore
        }
    }
}

mutation DeleteMediaListEntryMutation($listId:Int){
    DeleteMediaListEntry(id:$listId){
        deleted
    }
}


mutation ToggleFavouriteMutation($animeId:Int,$mangaId:Int, $characterId:Int
    ,$staffId:Int, $studioId:Int){
    ToggleFavourite(animeId:$animeId, mangaId:$mangaId, characterId:$characterId, staffId:$staffId, studioId:$studioId){
        anime{
            __typename
            nodes{
                isFavourite
            }
        }
        manga{
            __typename
            nodes{
                isFavourite
            }
        }
        characters{
            __typename
            nodes{
                isFavourite
            }
        }
        staff{
            __typename
            nodes{
                isFavourite
            }
        }
        studios{
            __typename
            nodes{
                isFavourite
            }
        }
    }
}



fragment mediaListContent on MediaList{
    id
    mediaId
    userId
    status
    progress
    progressVolumes
    repeat
    private
    notes
    startedAt {
        year
        month
        day
    }
    completedAt {
        year
        month
        day
    }
}

fragment narrowMediaContent on Media{
    id
    title {
        ... on MediaTitle{
            english
            romaji
            native
            userPreferred
        }
    }
    isAdult
    format
    type
    genres
    status
    averageScore
    episodes
    chapters
    volumes
    duration
    startDate {
        ... on FuzzyDate{
            year
            month
            day
        }
    }
    endDate{
        ... on FuzzyDate{
            year
            month
            day
        }
    }
    coverImage {
        ... on MediaCoverImage{
            medium
            large
            extraLarge
        }
    }
    bannerImage
    mediaListEntry{
        progress
    }
}



fragment fuzzyDate on FuzzyDate{
    year
    month
    day
}

fragment mediaTitle on MediaTitle{
    english
    romaji
    native
    userPreferred
}

fragment mediaCoverImage on MediaCoverImage{
    medium
    large
    extraLarge
}


fragment recommendationMedia on Media{
    id
    averageScore
    coverImage{
        ... mediaCoverImage
    }
    title{
        ... mediaTitle
    }
    bannerImage
    type
    format
    status
    seasonYear
    isAdult
}










