query SeasonListQuery($page: Int!
    , $perPage: Int!
    , $seasonYear: Int
    , $season: MediaSeason
    , $status: MediaStatus
    , $genre:String
    , $format: MediaFormat
    , $genre_in:[String]
    , $sort: [MediaSort]) {
    Page(page: $page, perPage: $perPage) {
        media(seasonYear: $seasonYear, season: $season,genre: $genre, format: $format,status: $status,genre_in: $genre_in, sort: $sort,isAdult:false) {
            ... on Media{
                ... narrowMediaContent
            }
        }
    }
}

query MediaListEditorQuery($mediaId:Int,$userId:Int, $format:ScoreFormat){
    MediaList(mediaId:$mediaId, userId:$userId){
        ... mediaListContent
        score(format:$format)
    }
}

query MediaRecommendationQuery($mediaId:Int, $page:Int, $perPage:Int
    , $sort:[RecommendationSort] ){
    Media(id:$mediaId){
        recommendations(page:$page, perPage:$perPage,sort:$sort){
            nodes{
                id
                rating
                userRating
                media{
                    id
                }
                mediaRecommendation{
                    id
                    format
                    type
                    episodes
                    chapters
                    status
                    seasonYear
                    title{
                        ... mediaTitle
                    }
                    coverImage{
                        ... mediaCoverImage
                    }
                    bannerImage
                    averageScore
                }
            }
        }
    }
}

query MediaWatchQuery($mediaId:Int){
    Media(id:$mediaId){
        streamingEpisodes{
            title
            thumbnail
            url
            site
        }
    }
}

query MediaCharacterQuery(
    $page:Int,
    $perPage:Int,
    $mediaId:Int
    , $language:StaffLanguage){
    Media(id:$mediaId){
        characters(page:$page, perPage:$perPage, sort:[ROLE,ID]){
            edges{
                id
                role
                node{
                    name{
                        full
                    }
                }
                voiceActors(language:$language){
                    id
                    name{
                        full
                    }
                }

            }

        }
    }
}

query MediaStaffQuery($page:Int, $perPage:Int, $mediaId:Int){
    Media(id:$mediaId){
        staff(page:$page,perPage:$perPage){
            edges{
                role
                node{
                    id
                    name{
                        full
                    }
                }
            }
        }
    }
}

query MediaReviewQuery($mediaId:Int, $page:Int, $perPage:Int){
    Media(id:$mediaId){
        reviews(page:$page,perPage:$perPage,sort:[RATING_DESC]){
            edges{
                node{
                    id
                    userId
                    summary
                    userRating
                    rating
                    ratingAmount
                    user{
                        id
                        name
                        avatar{
                            large
                            medium
                        }
                    }
                }
            }
        }
    }
}

query MediaStatsQuery($mediaId:Int){
    Media(id:$mediaId){
        rankings{
            id
            rank
            type
            year
            allTime
            context
            season
        }

        trends(page:1, perPage:7,sort:[DATE]){
            nodes{
                date
                trending
            }
        }

        stats{
            statusDistribution{
                amount
                status
            }
        }
        stats{
            scoreDistribution{
                score
                amount
            }
        }
    }
}


query MediaOverViewQuery($mediaId:Int){
    Media(id:$mediaId){
        id
        title {
            ... mediaTitle
        }
        isAdult
        format
        type
        genres
        status
        averageScore
        meanScore
        chapters
        volumes
        popularity
        favourites
        episodes
        duration
        season
        seasonYear
        description
        chapters
        volumes
        source
        hashtag
        relations{
            edges{
                relationType(version:2)
                node{
                    id
                    title{
                        ... mediaTitle
                    }
                    coverImage{
                        ... mediaCoverImage
                    }
                    bannerImage
                    type
                    seasonYear
                    format
                    status
                    averageScore
                }
            }
        }
        externalLinks{
            id
            url
            site
        }
        tags{
            name
            isMediaSpoiler
        }
        startDate {
            ... fuzzyDate
        }
        endDate{
            ... fuzzyDate
        }
        trailer{
            id
            site
            thumbnail
        }
        studios{
            edges{
                node{
                    id
                    name
                    isAnimationStudio
                }
            }
        }
    }
}

query BasicUserQuery($id:Int){
    User(id:$id){
        id
        name
        avatar{
            medium
            large
        }
        bannerImage
        mediaListOptions{
            scoreFormat
        }
    }
}

query IsFavouriteQuery($mediaId:Int){
    Media(id:$mediaId){
        isFavourite
    }
}


#mutation
mutation SaveMediaListEntryMutation(
    $listId:Int, $mediaId:Int,
    $status:MediaListStatus,
    $score:Float,
    $progress:Int,
    $progressVolumes:Int,
    $private_:Boolean,
    $repeat:Int,
    $notes:String,
    $startedAt:FuzzyDateInput,
    $completedAt:FuzzyDateInput
){
    SaveMediaListEntry(id:$listId, mediaId:$mediaId
        , status:$status
        , score:$score
        , progress:$progress
        , progressVolumes:$progressVolumes
        ,repeat:$repeat
        ,private:$private_
        ,startedAt:$startedAt,completedAt:$completedAt, notes:$notes){
        id
    }
}


mutation UpdateRecommendationMutation($mediaId:Int, $mediaRecommendationId:Int, $rating:RecommendationRating){
    SaveRecommendation(mediaId:$mediaId, mediaRecommendationId:$mediaRecommendationId, rating:$rating){
        id
        userRating
        rating
    }
}

mutation SaveRecommendationMutation($mediaId:Int, $mediaRecommendationId:Int, $rating:RecommendationRating){
    SaveRecommendation(mediaId:$mediaId, mediaRecommendationId:$mediaRecommendationId, rating:$rating){
        id
        rating
        userRating
        media{
            id
        }
        mediaRecommendation{
            title{
                english
                romaji
                english
            }
            averageScore
        }
    }
}

mutation DeleteMediaListEntryMutation($listId:Int){
    DeleteMediaListEntry(id:$listId){
        deleted
    }
}


mutation ToggleFavouriteMutation($animeId:Int,$mangaId:Int, $characterId:Int
    ,$staffId:Int, $studioId:Int){
    ToggleFavourite(animeId:$animeId, mangaId:$mangaId, characterId:$characterId, staffId:$staffId, studioId:$studioId){
        anime{
            __typename
        }
        manga{
            __typename
        }
        characters{
            __typename
        }
        staff{
            __typename
        }
        studios{
            __typename
        }
    }
}



fragment mediaListContent on MediaList{
    id
    mediaId
    userId
    status
    progress
    progressVolumes
    repeat
    private
    notes
    startedAt {
        year
        month
        day
    }
    completedAt {
        year
        month
        day
    }
}

fragment narrowMediaContent on Media{
    id
    title {
        ... on MediaTitle{
            english
            romaji
            native
            userPreferred
        }
    }
    isAdult
    format
    type
    genres
    status
    averageScore
    episodes
    chapters
    volumes
    duration
    startDate {
        ... on FuzzyDate{
            year
            month
            day
        }
    }
    endDate{
        ... on FuzzyDate{
            year
            month
            day
        }
    }
    coverImage {
        ... on MediaCoverImage{
            medium
            large
            extraLarge
        }
    }
    bannerImage

}



fragment fuzzyDate on FuzzyDate{
    year
    month
    day
}

fragment mediaTitle on MediaTitle{
    english
    romaji
    native
    userPreferred
}

fragment mediaCoverImage on MediaCoverImage{
    medium
    large
    extraLarge
}











